(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5330"],{10:function(e,t){},11:function(e,t){},12:function(e,t){},Bcyb:function(e,t,n){"use strict";var i=n("a9fy");n.n(i).a},Eey9:function(e,t,n){},JmUE:function(e,t,n){},M8qW:function(e,t,n){"use strict";var i=n("Eey9");n.n(i).a},M9rD:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return r});var i=n("t3Un");function a(e,t){return Object(i.a)({url:"api/generator/"+e+"/"+t,method:"post",responseType:2===t?"blob":""})}function o(e){return Object(i.a)({url:"api/generator",data:e,method:"put"})}function r(e){return Object(i.a)({url:"api/generator/sync",method:"post",data:e})}},PmOz:function(e,t,n){"use strict";var i=n("JmUE");n.n(i).a},U9al:function(e,t,n){"use strict";n.r(t);var i=n("M9rD"),a=n("EPZ6"),o=n.n(a),r=n("Asgo"),l=n.n(r),s=n("t3Un");n("AJLq");function c(e){if(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}return""}function d(e,t,n){var i=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.style.display="none",a.href=i;var o=n?c(new Date)+"-"+t+"."+n:c(new Date)+"-"+t;a.setAttribute("download",o),document.body.appendChild(a),a.click(),document.body.removeChild(a)}var u=n("nKCB"),f=n.n(u),p=n("9qU4"),m=n.n(p),h=n("6ZY3"),g=n.n(h),v=n("Q2cO"),b=n.n(v),S=n("omC7"),y=n.n(S),C=n("bS4n"),T=n.n(C);function A(e,t){return Object(s.a)({url:e,method:"get",params:t})}function _(e,t){return Object(s.a)({url:e,method:"get",responseType:"blob",params:t})}var x=n("ym4x"),O=n.n(x);function w(e){e=N({title:"",url:"",data:[],selections:[],query:{},params:{},form:{},defaultForm:function(){},sort:"id,desc",time:50,crudMethod:{add:function(e){},delete:function(e){},edit:function(e){},get:function(e){}},optShow:{add:!0,edit:!0,del:!0,download:!0},props:{},queryOnPresenterCreated:!0,debug:!1},e);var t=T()({},e,{dataStatus:{},status:{add:w.STATUS.NORMAL,edit:w.STATUS.NORMAL,get cu(){if(this.add===w.STATUS.NORMAL&&this.edit===w.STATUS.NORMAL)return w.STATUS.NORMAL;if(this.add===w.STATUS.PREPARED||this.edit===w.STATUS.PREPARED)return w.STATUS.PREPARED;if(this.add===w.STATUS.PROCESSING||this.edit===w.STATUS.PROCESSING)return w.STATUS.PROCESSING;throw new Error("wrong crud's cu status")},get title(){return this.add>w.STATUS.NORMAL?"新增"+i.title:this.edit>w.STATUS.NORMAL?"编辑"+i.title:i.title}},msg:{submit:"提交成功",add:"新增成功",edit:"修改成功",del:"删除成功"},page:{page:0,size:10,total:0},loading:!0,downloadLoading:!1,delAllLoading:!1}),n={submitSuccessNotify:function(){i.notify(i.msg.submit,w.NOTIFICATION_TYPE.SUCCESS)},addSuccessNotify:function(){i.notify(i.msg.add,w.NOTIFICATION_TYPE.SUCCESS)},editSuccessNotify:function(){i.notify(i.msg.edit,w.NOTIFICATION_TYPE.SUCCESS)},delSuccessNotify:function(){i.notify(i.msg.del,w.NOTIFICATION_TYPE.SUCCESS)},toQuery:function(){i.page.page=1,i.refresh()},refresh:function(){if(E(i,w.HOOK.beforeRefresh))return new l.a(function(e,t){i.loading=!0,A(i.url,i.getQueryParams()).then(function(t){i.page.total=t.totalElements,i.data=t.content,i.resetDataStatus(),setTimeout(function(){i.loading=!1,E(i,w.HOOK.afterRefresh)},i.time),e(t)}).catch(function(e){i.loading=!1,t(e)})})},toAdd:function(){E(i,w.HOOK.beforeToAdd,i.form)&&E(i,w.HOOK.beforeToCU,i.form)&&(i.status.add=w.STATUS.PREPARED,E(i,w.HOOK.afterToAdd,i.form),E(i,w.HOOK.afterToCU,i.form))},toEdit:function(e){i.resetForm(JSON.parse(y()(e))),E(i,w.HOOK.beforeToEdit,i.form)&&E(i,w.HOOK.beforeToCU,i.form)&&(i.status.edit=w.STATUS.PREPARED,i.getDataStatus(e.id).edit=w.STATUS.PREPARED,E(i,w.HOOK.afterToEdit,i.form),E(i,w.HOOK.afterToCU,i.form))},toDelete:function(e){i.getDataStatus(e.id).delete=w.STATUS.PREPARED},cancelDelete:function(e){E(i,w.HOOK.beforeDeleteCancel,e)&&(i.getDataStatus(e.id).delete=w.STATUS.NORMAL,E(i,w.HOOK.afterDeleteCancel,e))},cancelCU:function(){var e=i.status.add,t=i.status.edit;if(e===w.STATUS.PREPARED){if(!E(i,w.HOOK.beforeAddCancel,i.form))return;i.status.add=w.STATUS.NORMAL}if(t===w.STATUS.PREPARED){if(!E(i,w.HOOK.beforeEditCancel,i.form))return;i.status.edit=w.STATUS.NORMAL,i.getDataStatus(i.form.id).edit=w.STATUS.NORMAL}i.resetForm(),e===w.STATUS.PREPARED&&E(i,w.HOOK.afterAddCancel,i.form),t===w.STATUS.PREPARED&&E(i,w.HOOK.afterEditCancel,i.form),i.findVM("form").$refs.form&&i.findVM("form").$refs.form.clearValidate()},submitCU:function(){E(i,w.HOOK.beforeValidateCU)&&i.findVM("form").$refs.form.validate(function(e){e&&E(i,w.HOOK.afterValidateCU)&&(i.status.add===w.STATUS.PREPARED?i.doAdd():i.status.edit===w.STATUS.PREPARED&&i.doEdit())})},doAdd:function(){E(i,w.HOOK.beforeSubmit)&&(i.status.add=w.STATUS.PROCESSING,i.crudMethod.add(i.form).then(function(){i.status.add=w.STATUS.NORMAL,i.resetForm(),i.addSuccessNotify(),E(i,w.HOOK.afterSubmit),i.toQuery()}).catch(function(){i.status.add=w.STATUS.PREPARED,E(i,w.HOOK.afterAddError)}))},doEdit:function(){E(i,w.HOOK.beforeSubmit)&&(i.status.edit=w.STATUS.PROCESSING,i.crudMethod.edit(i.form).then(function(){i.status.edit=w.STATUS.NORMAL,i.getDataStatus(i.form.id).edit=w.STATUS.NORMAL,i.editSuccessNotify(),i.resetForm(),E(i,w.HOOK.afterSubmit),i.refresh()}).catch(function(){i.status.edit=w.STATUS.PREPARED,E(i,w.HOOK.afterEditError)}))},doDelete:function(e){var t=!1,n=void 0,a=[];if(e instanceof Array?(t=!0,e.forEach(function(e){a.push(e.id)})):(a.push(e.id),n=i.getDataStatus(e.id)),E(i,w.HOOK.beforeDelete,e))return t||(n.delete=w.STATUS.PROCESSING),i.crudMethod.del(a).then(function(){t?i.delAllLoading=!1:n.delete=w.STATUS.PREPARED,i.delChangePage(1),i.delSuccessNotify(),E(i,w.HOOK.afterDelete,e),i.refresh()}).catch(function(){t?i.delAllLoading=!1:n.delete=w.STATUS.PREPARED})},doExport:function(){i.downloadLoading=!0,_(i.url+"/download",i.getQueryParams()).then(function(e){d(e,i.title+"数据","xlsx"),i.downloadLoading=!1}).catch(function(){i.downloadLoading=!1})},getQueryParams:function(){return T()({page:i.page.page-1,size:i.page.size,sort:i.sort},i.query,i.params)},pageChangeHandler:function(e){i.page.page=e,i.refresh()},sizeChangeHandler:function(e){i.page.size=e,i.page.page=1,i.refresh()},delChangePage:function(e){i.data.length===e&&1!==i.page.page&&(i.page.page-=1)},selectionChangeHandler:function(e){i.selections=e},resetQuery:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=JSON.parse(y()(i.defaultQuery)),n=i.query;o()(n).forEach(function(e){n[e]=t[e]}),e&&i.toQuery()},resetForm:function(e){var t=e||("object"===b()(i.defaultForm)?JSON.parse(y()(i.defaultForm)):i.defaultForm()),n=i.form;for(var a in t)n.hasOwnProperty(a)?n[a]=t[a]:O.a.set(n,a,t[a])},resetDataStatus:function(){var e={};!function t(n){n.forEach(function(n){e[n.id]={delete:0,edit:0},n.children&&t(n.children)})}(i.data),i.dataStatus=e},getDataStatus:function(e){return i.dataStatus[e]},selectAllChange:function(e){e&&e.length===i.data.length?e.forEach(function(t){i.selectChange(e,t)}):i.findVM("presenter").$refs.table.clearSelection()},selectChange:function(e,t){e.find(function(e){return e.id===t.id})?t.children&&t.children.forEach(function(t){i.findVM("presenter").$refs.table.toggleRowSelection(t,!0),e.push(t),t.children&&i.selectChange(e,t)}):i.toggleRowSelection(e,t)},toggleRowSelection:function(e,t){t.children&&t.children.forEach(function(t){i.findVM("presenter").$refs.table.toggleRowSelection(t,!1),t.children&&i.toggleRowSelection(e,t)})},findVM:function(e){return i.vms.find(function(t){return t&&t.type===e}).vm},notify:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.NOTIFICATION_TYPE.INFO;i.vms[0].vm.$notify({title:e,type:t,duration:2500})},updateProp:function(e,t){O.a.set(i.props,e,t)}},i=g()({},t);return O.a.observable(i),g()(i,n),g()(i,{defaultQuery:JSON.parse(y()(t.query)),vms:Array(4),registerVM:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i={type:e,vm:t};n<0?this.vms.push(i):(this.vms.length=Math.max(this.vms.length,n),this.vms.splice(n,1,i))},unregisterVM:function(e){this.vms.splice(this.vms.findIndex(function(t){return t&&t.vm===e}),1)}}),m()(i),i}function E(e,t){e.debug&&console.log("callVmHook: "+t);for(var n=!0,i=[e],a=2;a<arguments.length;++a)i.push(arguments[a]);var o=new f.a;return e.vms.forEach(function(e){return e&&o.add(e.vm)}),o.forEach(function(e){e[t]&&(n=!1!==e[t].apply(e,i)&&n)}),n}function N(e,t){var n=T()({},e);for(var i in e)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}w.HOOK={beforeRefresh:"beforeCrudRefresh",afterRefresh:"afterCrudRefresh",beforeDelete:"beforeCrudDelete",afterDelete:"afterCrudDelete",beforeDeleteCancel:"beforeCrudDeleteCancel",afterDeleteCancel:"afterCrudDeleteCancel",beforeToAdd:"beforeCrudToAdd",afterToAdd:"afterCrudToAdd",beforeToEdit:"beforeCrudToEdit",afterToEdit:"afterCrudToEdit",beforeToCU:"beforeCrudToCU",afterToCU:"afterCrudToCU",beforeValidateCU:"beforeCrudValidateCU",afterValidateCU:"afterCrudValidateCU",beforeAddCancel:"beforeCrudAddCancel",afterAddCancel:"afterCrudAddCancel",beforeEditCancel:"beforeCrudEditCancel",afterEditCancel:"afterCrudEditCancel",beforeSubmit:"beforeCrudSubmitCU",afterSubmit:"afterCrudSubmitCU",afterAddError:"afterCrudAddError",afterEditError:"afterCrudEditError"},w.STATUS={NORMAL:0,PREPARED:1,PROCESSING:2},w.NOTIFICATION_TYPE={SUCCESS:"success",WARNING:"warning",INFO:"info",ERROR:"error"};var k=w,D={props:{crud:{type:Object,required:!0},itemClass:{type:String,required:!1,default:""}}},R=n("ZrdR"),M=Object(R.a)(D,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("el-button",{attrs:{size:"mini",type:"xy-primary",icon:"el-icon-search"},on:{click:e.crud.toQuery}},[e._v("搜索")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"xy-primary",icon:"el-icon-refresh-left"},on:{click:function(t){return e.crud.resetQuery()}}},[e._v("重置")])],1)},[],!1,null,null,null);M.options.__file="RR.operation.vue";var P=M.exports,$={mixins:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=N({type:void 0},e),{inject:{crud:{from:"crud"}},created:function(){this.crud.registerVM(e.type,this)},beforeDestroy:function(){this.crud.unregisterVM(this)}}}()],props:{permission:{type:Object,default:null}},data:function(){return{allColumnsSelected:!0,allColumnsSelectedIndeterminate:!1}},created:function(){this.crud.updateProp("searchToggle",!0)},methods:{toDelete:function(e){var t=this;this.$confirm("确认删除选中的"+e.length+"条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.crud.delAllLoading=!0,t.crud.doDelete(e)}).catch(function(){})},handleCheckAllChange:function(e){if(!1!==e){for(var t in this.crud.props.tableColumns)this.crud.props.tableColumns[t].visible=e;this.allColumnsSelected=e,this.allColumnsSelectedIndeterminate=!1}else this.allColumnsSelected=!0},handleCheckedTableColumnsChange:function(e){var t=0,n=0;for(var i in this.crud.props.tableColumns)++t,n+=this.crud.props.tableColumns[i].visible?1:0;if(0===n)return this.crud.notify("请至少选择一列",k.NOTIFICATION_TYPE.WARNING),void this.$nextTick(function(){e.visible=!0});this.allColumnsSelected=n===t,this.allColumnsSelectedIndeterminate=n!==t&&0!==n},toggleSearch:function(){this.crud.props.searchToggle=!this.crud.props.searchToggle}}},L=(n("Bcyb"),Object(R.a)($,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"crud-opts"},[n("span",{staticClass:"crud-opts-left"},[e._t("left"),e._v(" "),e.crud.optShow.add?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.add,expression:"permission.add"}],attrs:{size:"mini",type:"xy-primary",icon:"el-icon-plus"},on:{click:e.crud.toAdd}},[e._v("\n      新增\n    ")]):e._e(),e._v(" "),e.crud.optShow.edit?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.edit,expression:"permission.edit"}],attrs:{disabled:1!==e.crud.selections.length,size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.crud.toEdit(e.crud.selections[0])}}},[e._v("\n      修改\n    ")]):e._e(),e._v(" "),e.crud.optShow.del?n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:e.permission.del,expression:"permission.del"}],attrs:{slot:"reference",loading:e.crud.delAllLoading,disabled:0===e.crud.selections.length,type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.toDelete(e.crud.selections)}},slot:"reference"},[e._v("\n      删除\n    ")]):e._e(),e._v(" "),e.crud.optShow.download?n("el-button",{attrs:{loading:e.crud.downloadLoading,disabled:!e.crud.data.length,size:"mini",type:"xy-primary",icon:"el-icon-download"},on:{click:e.crud.doExport}},[e._v("导出")]):e._e(),e._v(" "),e._t("right")],2),e._v(" "),n("el-button-group",{staticClass:"crud-opts-right"},[n("el-button",{attrs:{size:"mini",plain:"",type:"info",icon:"el-icon-search"},on:{click:function(t){return e.toggleSearch()}}}),e._v(" "),n("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.crud.refresh()}}}),e._v(" "),n("el-popover",{attrs:{placement:"bottom-end",width:"150",trigger:"click"}},[n("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-s-grid"},slot:"reference"},[n("i",{staticClass:"fa fa-caret-down",attrs:{"aria-hidden":"true"}})]),e._v(" "),n("el-checkbox",{attrs:{indeterminate:e.allColumnsSelectedIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.allColumnsSelected,callback:function(t){e.allColumnsSelected=t},expression:"allColumnsSelected"}},[e._v("\n        全选\n      ")]),e._v(" "),e._l(e.crud.props.tableColumns,function(t){return n("el-checkbox",{key:t.label,on:{change:function(n){return e.handleCheckedTableColumnsChange(t)}},model:{value:t.visible,callback:function(n){e.$set(t,"visible",n)},expression:"item.visible"}},[e._v("\n        "+e._s(t.label)+"\n      ")])})],2)],1)],1)},[],!1,null,null,null));L.options.__file="CRUD.operation.vue";var U=L.exports,z={mixins:[{inject:{crud:{from:"crud"},page:{from:"crud.page"}},created:function(){this.crud.registerVM("pagination",this,2)},beforeDestroy:function(){this.crud.unregisterVM(this)}}]},I=Object(R.a)(z,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-pagination",{attrs:{"page-size":e.page.size,total:e.page.total,"current-page":e.page.page,background:"",layout:"total, prev, pager, next, sizes"},on:{"update:pageSize":function(t){return e.$set(e.page,"size",t)},"update:page-size":function(t){return e.$set(e.page,"size",t)},"update:currentPage":function(t){return e.$set(e.page,"page",t)},"update:current-page":function(t){return e.$set(e.page,"page",t)},"size-change":function(t){return e.crud.sizeChangeHandler(t)},"current-change":e.crud.pageChangeHandler}})},[],!1,null,null,null);I.options.__file="Pagination.vue";var H=I.exports,F=n("cLjf"),q=n.n(F),j=n("hDQ3"),K=n.n(j),V=n("Q2AE");var Q={name:"GeneratorConfig",components:{},mixins:[{data:function(){return{data:[],sort:"id,desc",page:0,size:10,total:0,url:"",params:{},query:{},time:50,isAdd:!1,downloadLoading:!1,loading:!0,delLoading:!1,delAllLoading:!1,dialog:!1,form:{},resetForm:{},title:""}},methods:{parseTime:c,downloadFile:d,checkPermission:function(e){if(e&&e instanceof Array&&e.length>0){var t=e;return!!(V.a.getters&&V.a.getters.roles).some(function(e){return t.includes(e)})}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1},init:function(){var e=this;return K()(q.a.mark(function t(){return q.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.beforeInit();case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",new l.a(function(t,n){e.loading=!0,A(e.url,e.getQueryParame()).then(function(n){e.total=n.totalElements,e.data=n.content,setTimeout(function(){e.loading=!1},e.time),t(n)}).catch(function(t){e.loading=!1,n(t)})}));case 5:case"end":return t.stop()}},t,e)}))()},beforeInit:function(){return!0},getQueryParame:function(){return T()({page:this.page,size:this.size,sort:this.sort},this.query,this.params)},pageChange:function(e){this.page=e-1,this.init()},sizeChange:function(e){this.page=0,this.size=e,this.init()},delChangePage:function(e){void 0===e&&(e=1),this.data.length===e&&0!==this.page&&(this.page=this.page-1)},toQuery:function(){this.page=0,this.init()},beforeDelMethod:function(){return!0},delMethod:function(e){var t=this;this.beforeDelMethod()&&(this.delLoading=!0,this.crudMethod.del(e).then(function(){t.delLoading=!1,t.$refs[e].doClose(),t.delChangePage(),t.delSuccessNotify(),t.afterDelMethod(),t.init()}).catch(function(){t.delLoading=!1,t.$refs[e].doClose()}))},afterDelMethod:function(){},beforeDelAllMethod:function(){var e=this;this.$confirm("你确定删除选中的数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.delAllMethod()})},delAllMethod:function(){var e=this;this.delAllLoading=!0;for(var t=this.$refs.table.selection,n=[],i=0;i<t.length;i++)n.push(t[i].id);this.crudMethod.delAll(n).then(function(){e.delAllLoading=!1,e.delChangePage(n.length),e.init(),e.delSuccessNotify()}).catch(function(){e.delAllLoading=!1})},beforeShowAddForm:function(){},showAddFormDialog:function(){this.isAdd=!0,this.resetForm=JSON.parse(y()(this.form)),this.beforeShowAddForm(),this.dialog=!0},beforeShowEditForm:function(e){},showEditFormDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.isAdd=!1,e&&(this.resetForm=JSON.parse(y()(this.form)),this.form=JSON.parse(y()(e))),this.beforeShowEditForm(e),this.dialog=!0},addMethod:function(){var e=this;this.crudMethod.add(this.form).then(function(){e.addSuccessNotify(),e.loading=!1,e.afterAddMethod(),e.cancel(),e.init()}).catch(function(){e.loading=!1,e.afterAddErrorMethod()})},afterAddMethod:function(){},afterAddErrorMethod:function(){},editMethod:function(){var e=this;this.crudMethod.edit(this.form).then(function(){e.editSuccessNotify(),e.loading=!1,e.afterEditMethod(),e.cancel(),e.init()}).catch(function(){e.loading=!1})},afterEditMethod:function(){},beforeSubmitMethod:function(){return!0},submitMethod:function(){var e=this;this.beforeSubmitMethod()&&this.$refs.form&&this.$refs.form.validate(function(t){t&&(e.loading=!0,e.isAdd?e.addMethod():e.editMethod())})},cancel:function(){this.dialog=!1,this.$refs.form&&(this.$refs.form.clearValidate(),this.form=this.resetForm)},getFormTitle:function(){return this.isAdd?"新增"+this.title:"编辑"+this.title},downloadMethod:function(){var e=this;this.beforeInit(),this.downloadLoading=!0,_(this.url+"/download",this.params).then(function(t){e.downloadFile(t,e.title+"数据","xlsx"),e.downloadLoading=!1}).catch(function(){e.downloadLoading=!1})}}}],data:function(){return{drawer:!1,remark:"",lovs:[],activeName:"first",tableName:"",tableHeight:550,columnLoading:!1,configLoading:!1,dicts:[],syncLoading:!1,genLoading:!1,form:{id:null,tableName:"",section:"BOTH",pack:"",path:"",moduleName:"",cover:"false",apiPath:"",prefix:"",apiModule:"",apiAlias:null,apiType:""},rulesBOTH:{author:[{required:!0,message:"作者不能为空",trigger:["blur","change"]}],pack:[{required:!0,message:"包路径不能为空",trigger:["blur","change"]}],moduleName:[{required:!0,message:"包路径不能为空",trigger:["blur","change"]}],path:[{required:!0,message:"前端路径不能为空",trigger:["blur","change"]}],apiAlias:[{required:!0,message:"接口名称不能为空",trigger:["blur","change"]}]},rulesFRONT:{apiAlias:[{required:!0,message:"接口名称不能为空",trigger:["blur","change"]}],author:[{required:!0,message:"作者不能为空",trigger:["blur","change"]}],path:[{required:!0,message:"前端路径不能为空",trigger:["blur","change"]}]},rulesADMIN:{author:[{required:!0,message:"作者不能为空",trigger:["blur","change"]}],pack:[{required:!0,message:"包路径不能为空",trigger:["blur","change"]}],moduleName:[{required:!0,message:"包路径不能为空",trigger:["blur","change"]}],apiAlias:[{required:!0,message:"接口名称不能为空",trigger:["blur","change"]}]},apiTypes:[{name:"增",type:"ADD"},{name:"删",type:"DEL"},{name:"改",type:"PUT"},{name:"查",type:"GET"},{name:"EXCEL",type:"EXCEL"}]}},computed:{genFront:function(){return"BOTH"===this.form.section||"FRONT"===this.form.section},genAdmin:function(){return"BOTH"===this.form.section||"ADMIN"===this.form.section},rule:function(){return this["rules"+this.form.section]},apiType:{get:function(){var e=this.form.apiType;return e&&e.length>0?e.split(","):[]},set:function(e){this.form.apiType=e.join(",")}}},created:function(){this.tableHeight=document.documentElement.clientHeight-385},methods:{initData:function(e){this.paramsData=T()({},e)},pageInit:function(){var e=this,t=this.paramsData;this.tableName=t.tableName,this.remark=t.remark,this.$nextTick(function(){e.init(),function(e){return Object(s.a)({url:"api/genConfig/"+e,method:"get"})}(e.tableName).then(function(t){e.form=t,e.form.cover=e.form.cover.toString()})})},beforeInit:function(){this.url="api/generator/columns";var e=this.tableName;return this.params={tableName:e},!0},saveColumnConfig:function(){var e=this;this.columnLoading=!0,Object(i.b)(this.data).then(function(t){e.Notify("保存成功","success"),e.columnLoading=!1}).catch(function(t){e.columnLoading=!1})},doSubmit:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.configLoading=!0,function(e){return Object(s.a)({url:"api/genConfig",data:e,method:"put"})}(e.form).then(function(t){e.Notify("保存成功","success"),e.form=t,e.form.cover=e.form.cover.toString(),e.configLoading=!1}).catch(function(t){e.configLoading=!1}))})},sync:function(){var e=this;this.syncLoading=!0,Object(i.c)([this.tableName]).then(function(){e.init(),e.Notify("同步成功","success"),e.syncLoading=!1}).then(function(){e.syncLoading=!1})},toGen:function(){var e=this;this.genLoading=!0,Object(i.b)(this.data).then(function(t){e.Notify("保存成功","success"),Object(i.a)(e.tableName,0).then(function(t){e.genLoading=!1,e.Notify("生成成功","success")}).catch(function(t){e.genLoading=!1})}).catch(function(t){e.genLoading=!1})}}},G=(n("yyoZ"),n("PmOz"),Object(R.a)(Q,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Drawer",{attrs:{visible:e.drawer,title:e.remark+"代码生成配置",size:86},on:{"update:visible":function(t){e.drawer=t},opened:e.pageInit}},[n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:15}},[n("el-col",{staticStyle:{"margin-bottom":"10px"}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"role-span"},[e._v(e._s(e.remark)+"字段配置："+e._s(e.tableName))]),e._v(" "),n("el-button",{staticStyle:{float:"right",padding:"6px 9px"},attrs:{loading:e.genLoading,icon:"el-icon-s-promotion",size:"mini",type:"xy-primary"},on:{click:e.toGen}},[e._v("保存&生成\n              ")]),e._v(" "),n("el-button",{staticStyle:{float:"right",padding:"6px 9px","margin-right":"9px"},attrs:{loading:e.columnLoading,icon:"el-icon-check",size:"mini",type:"xy-primary"},on:{click:e.saveColumnConfig}},[e._v("保存\n              ")]),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"数据库中表字段变动时使用该功能",placement:"top-start"}},[n("el-button",{staticStyle:{float:"right",padding:"6px 9px"},attrs:{loading:e.syncLoading,icon:"el-icon-refresh",size:"mini",type:"info"},on:{click:e.sync}},[e._v("同步\n                ")])],1)],1),e._v(" "),n("el-form",{attrs:{"label-position":"left",size:"small","label-width":"130px"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{data:e.data,"max-height":e.tableHeight,size:"mini"}},[n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"columnName",label:"字段名称"}}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"columnType",label:"字段类型"}}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"remark",label:"字段描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{staticClass:"edit-input",attrs:{size:"mini"},model:{value:e.data[t.$index].remark,callback:function(n){e.$set(e.data[t.$index],"remark",n)},expression:"data[scope.$index].remark"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"必填",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{model:{value:e.data[t.$index].notNull,callback:function(n){e.$set(e.data[t.$index],"notNull",n)},expression:"data[scope.$index].notNull"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"列表",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{model:{value:e.data[t.$index].listShow,callback:function(n){e.$set(e.data[t.$index],"listShow",n)},expression:"data[scope.$index].listShow"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",label:"表单",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-checkbox",{model:{value:e.data[t.$index].formShow,callback:function(n){e.$set(e.data[t.$index],"formShow",n)},expression:"data[scope.$index].formShow"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"表单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{staticClass:"edit-input",attrs:{filterable:"",clearable:"",size:"mini",placeholder:"请选择"},model:{value:e.data[t.$index].formType,callback:function(n){e.$set(e.data[t.$index],"formType",n)},expression:"data[scope.$index].formType"}},[n("el-option",{attrs:{label:"文本框",value:"Input"}}),e._v(" "),n("el-option",{attrs:{label:"文本域",value:"Textarea"}}),e._v(" "),n("el-option",{attrs:{label:"下拉框",value:"Select"}}),e._v(" "),n("el-option",{attrs:{label:"日期框",value:"Date"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"查询方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{staticClass:"edit-input",attrs:{filterable:"",clearable:"",size:"mini",placeholder:"请选择"},model:{value:e.data[t.$index].queryType,callback:function(n){e.$set(e.data[t.$index],"queryType",n)},expression:"data[scope.$index].queryType"}},[n("el-option",{attrs:{label:"=",value:"="}}),e._v(" "),n("el-option",{attrs:{label:"!=",value:"!="}}),e._v(" "),n("el-option",{attrs:{label:">=",value:">="}}),e._v(" "),n("el-option",{attrs:{label:"<=",value:"<="}}),e._v(" "),n("el-option",{attrs:{label:"Like",value:"Like"}}),e._v(" "),n("el-option",{attrs:{label:"NotNull",value:"NotNull"}}),e._v(" "),n("el-option",{attrs:{label:"BetWeen",value:"BetWeen"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"日期注解"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{staticClass:"edit-input",attrs:{filterable:"",clearable:"",size:"mini",placeholder:"请选择"},model:{value:e.data[t.$index].dateAnnotation,callback:function(n){e.$set(e.data[t.$index],"dateAnnotation",n)},expression:"data[scope.$index].dateAnnotation"}},[n("el-option",{attrs:{label:"自动创建时间",value:"CreationTimestamp"}}),e._v(" "),n("el-option",{attrs:{label:"自动更新时间",value:"UpdateTimestamp"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"关联字典"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{staticClass:"edit-input",attrs:{disabled:"Select"!==e.data[t.$index].formType,size:"mini"},model:{value:e.data[t.$index].dictName,callback:function(n){e.$set(e.data[t.$index],"dictName",n)},expression:"data[scope.$index].dictName"}})]}}])})],1)],1)],1)],1),e._v(" "),n("el-col",[n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"role-span"},[e._v("生成配置")]),e._v(" "),n("el-button",{staticStyle:{float:"right",padding:"6px 9px"},attrs:{loading:e.configLoading,icon:"el-icon-check",size:"mini",type:"xy-primary"},on:{click:e.doSubmit}},[e._v("保存\n              ")])],1),e._v(" "),n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rule,"label-position":"left",size:"small","label-width":"130px"}},[n("el-form-item",{attrs:{label:"作者名称",prop:"author"}},[n("el-input",{staticStyle:{width:"40%"},model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}}),e._v(" "),n("span",{staticStyle:{color:"#C0C0C0","margin-left":"10px"}},[e._v("类上面的作者名称")])],1),e._v(" "),n("el-form-item",{attrs:{label:"模块名称",prop:"moduleName"}},[n("el-input",{staticStyle:{width:"40%"},attrs:{disabled:!e.genAdmin},model:{value:e.form.moduleName,callback:function(t){e.$set(e.form,"moduleName",t)},expression:"form.moduleName"}}),e._v(" "),n("span",{staticStyle:{color:"#C0C0C0","margin-left":"10px"}},[e._v("模块的名称，请选择项目中已存在的模块")])],1),e._v(" "),n("el-form-item",{attrs:{label:"至于包下",prop:"pack"}},[n("el-input",{staticStyle:{width:"40%"},attrs:{disabled:!e.genAdmin},model:{value:e.form.pack,callback:function(t){e.$set(e.form,"pack",t)},expression:"form.pack"}}),e._v(" "),n("span",{staticStyle:{color:"#C0C0C0","margin-left":"10px"}},[e._v("项目包的名称，生成的代码放到哪个包里面")])],1),e._v(" "),n("el-form-item",{attrs:{label:"功能名称",prop:"apiAlias"}},[n("el-input",{staticStyle:{width:"40%"},model:{value:e.form.apiAlias,callback:function(t){e.$set(e.form,"apiAlias",t)},expression:"form.apiAlias"}}),e._v(" "),n("span",{staticStyle:{color:"#C0C0C0","margin-left":"10px"}},[e._v("功能的名称，用于控制器与接口文档中")])],1),e._v(" "),n("el-form-item",{attrs:{label:"前端模板",prop:"cover"}},[n("el-select",{staticStyle:{width:"40%"},attrs:{disabled:!e.genFront,filterable:"",placeholder:"请选择"},model:{value:e.form.frontTemplate,callback:function(t){e.$set(e.form,"frontTemplate",t)},expression:"form.frontTemplate"}},[n("el-option",{attrs:{label:"默认",value:"DEFAULT"}})],1),e._v(" "),n("span",{staticStyle:{color:"#C0C0C0","margin-left":"10px"}},[e._v("请选择前端生成模板")])],1),e._v(" "),n("el-form-item",{attrs:{label:"前端路径",prop:"path"}},[n("el-input",{staticStyle:{width:"40%"},attrs:{disabled:!e.genFront},model:{value:e.form.path,callback:function(t){e.$set(e.form,"path",t)},expression:"form.path"}}),e._v(" "),n("span",{staticStyle:{color:"#C0C0C0","margin-left":"10px"}},[e._v("webapp/WEB-INF/view文件夹下的相对目录，不存在即创建")])],1),e._v(" "),n("el-form-item",{attrs:{label:"去表前缀",prop:"prefix"}},[n("el-input",{staticStyle:{width:"40%"},attrs:{placeholder:"默认不去除表前缀"},model:{value:e.form.prefix,callback:function(t){e.$set(e.form,"prefix",t)},expression:"form.prefix"}}),e._v(" "),n("span",{staticStyle:{color:"#C0C0C0","margin-left":"10px"}},[e._v("默认不去除表前缀，可自定义")])],1),e._v(" "),n("el-form-item",{attrs:{label:"是否覆盖",prop:"cover"}},[n("el-radio-group",{staticStyle:{width:"40%"},attrs:{size:"mini"},model:{value:e.form.cover,callback:function(t){e.$set(e.form,"cover",t)},expression:"form.cover"}},[n("el-radio-button",{attrs:{label:"true"}},[e._v("是")]),e._v(" "),n("el-radio-button",{attrs:{label:"false"}},[e._v("否")])],1),e._v(" "),n("span",{staticStyle:{color:"#C0C0C0","margin-left":"10px"}},[e._v("谨防误操作，请慎重选择")])],1)],1)],1)],1)],1)],1)])},[],!1,null,"3fec5cf2",null));G.options.__file="config.vue";var B={name:"GeneratorIndex",components:{pagination:H,crudOperation:U,rrOperation:P,eConfig:G.exports},mixins:[function(e){function t(e){return{visible:function(t){return!e||!e[t]||e[t].visible}}}return{inject:["crud"],beforeCreate:function(){this._provided={crud:e,"crud.query":e.query,"crud.page":e.page,"crud.form":e.form}},data:function(){return{searchToggle:!0,columns:t()}},methods:{parseTime:c},created:function(){this.crud.registerVM("presenter",this,0),e.queryOnPresenterCreated&&e.toQuery()},beforeDestroy:function(){this.crud.unregisterVM(this)},mounted:function(){var e={};this.$refs.table.columns.forEach(function(t){t.property&&"default"===t.type&&(e[t.property]={label:t.label,visible:!0})}),this.columns=t(e),this.crud.updateProp("tableColumns",e)}}}(k({url:"api/generator/tables"})),{inject:{crud:{from:"crud"},query:{from:"crud.query"}},created:function(){this.crud.registerVM("header",this,1)},beforeDestroy:function(){this.crud.unregisterVM(this)}}],data:function(){return{syncLoading:!1}},created:function(){this.crud.optShow={add:!1,edit:!1,del:!1,download:!1}},methods:{toGen:function(e){var t=this;Object(i.a)(e,0).then(function(e){t.$notify({title:"生成成功",type:"success",duration:2500})})},toDownload:function(e){Object(i.a)(e,2).then(function(t){d(t,e,"zip")})},sync:function(){var e=this,t=[];this.crud.selections.forEach(function(e){t.push(e.tableName)}),this.syncLoading=!0,Object(i.c)(t).then(function(){e.crud.refresh(),e.crud.notify("同步成功",k.NOTIFICATION_TYPE.SUCCESS),e.syncLoading=!1}).then(function(){e.syncLoading=!1})},toConfigD:function(e){var t=this.$refs.eConfig;t.drawer=!0,t.initData(e)}}},J=(n("M8qW"),Object(R.a)(B,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"head-container"},[e.crud.props.searchToggle?n("div",[n("el-input",{staticStyle:{width:"224px"},attrs:{clearable:"",size:"small",placeholder:"请输入表名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.crud.toQuery(t)}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),e._v(" "),n("el-input",{staticStyle:{width:"224px"},attrs:{clearable:"",size:"small",placeholder:"请输入备注"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.crud.toQuery(t)}},model:{value:e.query.remark,callback:function(t){e.$set(e.query,"remark",t)},expression:"query.remark"}}),e._v(" "),n("rrOperation",{attrs:{crud:e.crud}})],1):e._e(),e._v(" "),n("crudOperation",[n("el-tooltip",{staticClass:"item",attrs:{slot:"right",effect:"dark",content:"数据库中表字段变动时使用该功能",placement:"top-start"},slot:"right"},[n("el-button",{attrs:{loading:e.syncLoading,disabled:0===e.crud.selections.length,size:"mini",type:"xy-primary",icon:"el-icon-refresh"},on:{click:e.sync}},[e._v("同步\n        ")])],1)],1)],1),e._v(" "),n("div",{staticClass:"content-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.crud.loading,expression:"crud.loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:e.crud.data,size:"mini",border:""},on:{"selection-change":e.crud.selectionChangeHandler}},[n("el-table-column",{attrs:{"show-overflow-tooltip":!0,type:"selection",width:"55"}}),e._v(" "),e.columns.visible("tableName")?n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"tableName",label:"表名"}}):e._e(),e._v(" "),e.columns.visible("remark")?n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"remark",label:"备注"}}):e._e(),e._v(" "),e.columns.visible("createTime")?n("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"createTime",label:"创建日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.parseTime(t.row.createTime)))])]}}],null,!1,3078210614)}):e._e(),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"操作",width:"160px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{"margin-right":"2px"},attrs:{size:"mini",type:"text"}},[n("router-link",{attrs:{to:"/preview/"+t.row.tableName}},[e._v("\n              预览\n            ")])],1),e._v(" "),n("el-button",{staticStyle:{"margin-left":"-1px","margin-right":"2px"},attrs:{size:"mini",type:"text"},on:{click:function(n){return e.toDownload(t.row.tableName)}}},[e._v("下载\n          ")]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"-1px","margin-right":"2px"},attrs:{size:"mini",type:"text"}},[n("a",{attrs:{href:"javascript: void 0;"},on:{click:function(n){return e.toConfigD(t.row)}}},[e._v("编辑")])]),e._v(" "),n("el-button",{staticStyle:{"margin-left":"-1px"},attrs:{type:"text",size:"mini"},on:{click:function(n){return e.toGen(t.row.tableName)}}},[e._v("生成\n          ")])]}}])})],1)],1),e._v(" "),n("div",{staticClass:"footer-container"},[n("pagination")],1),e._v(" "),n("eConfig",{ref:"eConfig"})],1)},[],!1,null,"7003f4a3",null));J.options.__file="index.vue";t.default=J.exports},a9fy:function(e,t,n){},kmnm:function(e,t,n){},yyoZ:function(e,t,n){"use strict";var i=n("kmnm");n.n(i).a}}]);